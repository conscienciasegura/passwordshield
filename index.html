<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Password Shield | by Consci√™ncia Segura</title>

<script src="zxcvbn.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.card{
  background:#1e293b;
  padding:30px;
  border-radius:15px;
  width:520px;
}

h2{text-align:center;margin:0;}
.brand{text-align:center;font-size:12px;opacity:.7;margin-bottom:15px;}

.mode-toggle{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-bottom:15px;
}

.mode-toggle button{
  padding:6px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-size:12px;
}

.active{
  background:#06b6d4;
  color:white;
}

.input-wrapper{position:relative;}

input{
  width:100%;
  padding:10px;
  border-radius:6px;
  border:none;
  background:#0f172a;
  color:white;
}

.eye{
  position:absolute;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
}

.bar{
  height:8px;
  border-radius:6px;
  margin-top:15px;
  transition:0.3s;
}

.section{
  margin-top:12px;
  font-size:13px;
  line-height:1.5;
}

.box{
  margin-top:12px;
  padding:10px;
  background:#0f172a;
  border-left:3px solid #06b6d4;
  font-size:13px;
}

button.generate{
  width:100%;
  padding:8px;
  margin-top:15px;
  border-radius:6px;
  border:none;
  cursor:pointer;
  background:#06b6d4;
  color:white;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="card">
  <h2>üîê Password Shield</h2>
  <div class="brand">by Consci√™ncia Segura</div>

  <div class="mode-toggle">
    <button id="eduBtn" class="active" onclick="setMode('educacional')">Modo Educacional</button>
    <button id="corpBtn" onclick="setMode('corporativo')">Modo Corporativo</button>
  </div>

  <div class="input-wrapper">
    <input type="password" id="password" placeholder="Digite sua senha..." oninput="checkPassword()">
    <span class="eye" onclick="togglePassword()">üëÅ</span>
  </div>

  <div id="bar" class="bar"></div>
  <div id="entropy" class="section"></div>

  <!-- SOC DIAL -->
  <div style="margin-top:25px; text-align:center;">
    <strong>Painel de Robustez</strong>

    <svg width="260" height="160" viewBox="0 0 260 160">
      <path d="M20 140 A110 110 0 0 1 240 140"
            stroke="#dc2626" stroke-width="20" fill="none"/>
      <line id="socNeedle"
            x1="130" y1="140"
            x2="130" y2="60"
            stroke="white"
            stroke-width="4"
            transform="rotate(-90 130 140)"
            style="transition: transform 0.6s ease;" />
      <circle cx="130" cy="140" r="6" fill="white"/>
    </svg>

    <div id="socLabel" style="margin-top:10px; font-size:13px;"></div>
  </div>

  <div id="vulnerabilities" class="box"></div>
  <div id="recommendations" class="box"></div>

  <button class="generate" onclick="generatePassword()">Gerar senha forte</button>
  <button class="generate" onclick="generatePDF()">Gerar Relat√≥rio PDF</button>

</div>

<script>

let mode = "educacional";

function setMode(selected){
  mode = selected;
  document.getElementById("eduBtn").classList.remove("active");
  document.getElementById("corpBtn").classList.remove("active");
  document.getElementById(selected === "educacional" ? "eduBtn" : "corpBtn").classList.add("active");
  checkPassword();
}

function togglePassword(){
  const input=document.getElementById("password");
  input.type=input.type==="password"?"text":"password";
}

function calculateEntropy(password){
  let charset=0;
  if(/[a-z]/.test(password)) charset+=26;
  if(/[A-Z]/.test(password)) charset+=26;
  if(/[0-9]/.test(password)) charset+=10;
  if(/[^a-zA-Z0-9]/.test(password)) charset+=32;
  if(charset===0) return 0;
  return Math.log2(Math.pow(charset,password.length));
}

function updateSOCIndicator(entropy){
  const needle = document.getElementById("socNeedle");
  const label = document.getElementById("socLabel");

  const maxEntropy = 120;
  let normalized = Math.min(entropy / maxEntropy, 1);
  let angle = (normalized * 180) - 90;

  needle.setAttribute("transform","rotate(" + angle + " 130 140)");

  let classification;

  if(entropy < 40){
    classification = "Robustez Baixa";
  } else if(entropy < 60){
    classification = "Robustez Moderada";
  } else if(entropy < 80){
    classification = "Boa Robustez";
  } else {
    classification = "Alta Robustez";
  }

  label.innerText = classification + " | Entropia: " + entropy.toFixed(2) + " bits";
}

function checkPassword(){

  if(typeof zxcvbn !== "function") return;

  const password=document.getElementById("password").value;
  if(password.length===0) return;

  const result=zxcvbn(password);
  const entropy=calculateEntropy(password);

  document.getElementById("bar").style.width=(result.score+1)*20+"%";
  document.getElementById("bar").style.background="#06b6d4";

  document.getElementById("entropy").innerText=
    "Score zxcvbn: "+result.score+" / 4";

  updateSOCIndicator(entropy);

  document.getElementById("vulnerabilities").innerText =
    result.feedback.warning || "Nenhuma vulnerabilidade cr√≠tica detectada.";

  document.getElementById("recommendations").innerText =
    result.feedback.suggestions.join(" ") || "Senha com boa complexidade estrutural.";
}

function generatePassword(){
  const chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";
  let p="";
  for(let i=0;i<16;i++){
    p+=chars.charAt(Math.floor(Math.random()*chars.length));
  }
  document.getElementById("password").value=p;
  checkPassword();
}

function generatePDF(){

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(16);
  doc.text("Relat√≥rio Executivo - Password Shield",20,20);
  doc.setFontSize(12);

  doc.text(document.getElementById("socLabel").innerText,20,40);
  doc.text(document.getElementById("vulnerabilities").innerText,20,60);
  doc.text(document.getElementById("recommendations").innerText,20,80);

  doc.save("Relatorio_Password_Shield.pdf");
}

</script>

</body>
</html>
