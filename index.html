<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Password Shield | by Consci√™ncia Segura</title>

<script src="zxcvbn.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.card{
  background:#1e293b;
  padding:30px;
  border-radius:15px;
  width:560px;
}

h2{text-align:center;margin:0;}
.brand{text-align:center;font-size:12px;opacity:.7;margin-bottom:15px;}

.mode-toggle{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-bottom:15px;
}

.mode-toggle button{
  padding:6px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-size:12px;
}

.active{
  background:#06b6d4;
  color:white;
}

.input-wrapper{position:relative;}

input{
  width:100%;
  padding:10px;
  border-radius:6px;
  border:none;
  background:#0f172a;
  color:white;
}

.eye{
  position:absolute;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
}

.bar{
  height:8px;
  border-radius:6px;
  margin-top:15px;
  transition:0.3s;
}

.section{
  margin-top:12px;
  font-size:13px;
  line-height:1.5;
}

.box{
  margin-top:12px;
  padding:10px;
  background:#0f172a;
  border-left:3px solid #06b6d4;
  font-size:13px;
}

button.generate{
  width:100%;
  padding:8px;
  margin-top:15px;
  border-radius:6px;
  border:none;
  cursor:pointer;
  background:#06b6d4;
  color:white;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="card">
  <h2>üîê Password Shield</h2>
  <div class="brand">by Consci√™ncia Segura</div>

  <div class="mode-toggle">
    <button id="eduBtn" class="active" onclick="setMode('educacional')">Modo Educacional</button>
    <button id="corpBtn" onclick="setMode('corporativo')">Modo Corporativo</button>
  </div>

  <div class="input-wrapper">
    <input type="password" id="password" placeholder="Digite sua senha..." oninput="checkPassword()">
    <span class="eye" onclick="togglePassword()">üëÅ</span>
  </div>

  <div id="bar" class="bar"></div>
  <div id="scoreInfo" class="section"></div>

  <!-- SOC DIAL -->
  <div style="margin-top:20px; text-align:center;">
    <strong>Painel de Robustez</strong>

    <svg width="260" height="160" viewBox="0 0 260 160">
      <path id="socArc" d="M20 140 A110 110 0 0 1 240 140"
            stroke="#dc2626" stroke-width="20" fill="none"/>
      <line id="socNeedle"
            x1="130" y1="140"
            x2="130" y2="60"
            stroke="white"
            stroke-width="4"
            transform="rotate(-90 130 140)"
            style="transition: transform 0.6s ease;" />
      <circle cx="130" cy="140" r="6" fill="white"/>
    </svg>

    <div id="socLabel" style="margin-top:10px; font-size:13px;"></div>
  </div>

  <div id="attackSim" class="box"></div>
  <div id="composition" class="box"></div>
  <div id="personalData" class="box"></div>
  <div id="vulnerabilities" class="box"></div>

  <button class="generate" onclick="generatePassword()">Gerar senha forte</button>
  <button class="generate" onclick="generatePDF()">Gerar Relat√≥rio PDF</button>
</div>

<script>

let mode="educacional";

function setMode(selected){
  mode=selected;
  document.getElementById("eduBtn").classList.remove("active");
  document.getElementById("corpBtn").classList.remove("active");
  document.getElementById(selected==="educacional"?"eduBtn":"corpBtn").classList.add("active");
  checkPassword();
}

function togglePassword(){
  const input=document.getElementById("password");
  input.type=input.type==="password"?"text":"password";
}

function translateTime(text){
  const dict={
    "less than a second":"menos de 1 segundo",
    "seconds":"segundos",
    "second":"segundo",
    "minutes":"minutos",
    "minute":"minuto",
    "hours":"horas",
    "hour":"hora",
    "days":"dias",
    "day":"dia",
    "months":"meses",
    "month":"m√™s",
    "years":"anos",
    "year":"ano",
    "centuries":"s√©culos",
    "century":"s√©culo"
  };
  for(const key in dict){ text=text.replace(key,dict[key]); }
  return text;
}

function calculateEntropy(password){
  let charset=0;
  if(/[a-z]/.test(password)) charset+=26;
  if(/[A-Z]/.test(password)) charset+=26;
  if(/[0-9]/.test(password)) charset+=10;
  if(/[^a-zA-Z0-9]/.test(password)) charset+=32;
  return Math.log2(Math.pow(charset,password.length));
}

function updateSOC(entropy){
  const needle=document.getElementById("socNeedle");
  const arc=document.getElementById("socArc");

  const maxEntropy=120;
  let normalized=Math.min(entropy/maxEntropy,1);
  let angle=(normalized*180)-90;
  needle.setAttribute("transform","rotate("+angle+" 130 140)");

  let color="#dc2626";
  if(entropy>60) color="#facc15";
  if(entropy>80) color="#22c55e";
  arc.setAttribute("stroke",color);

  document.getElementById("socLabel").innerText=
    "Entropia: "+entropy.toFixed(2)+" bits";
}

function analyzeComposition(password){
  const checks={
    "Min√∫sculas":/[a-z]/.test(password),
    "Mai√∫sculas":/[A-Z]/.test(password),
    "N√∫meros":/[0-9]/.test(password),
    "S√≠mbolos":/[^a-zA-Z0-9]/.test(password),
    "Tamanho ‚â• 12":password.length>=12
  };
  let html="<strong>Composi√ß√£o:</strong><br>";
  for(const key in checks){
    html+=checks[key]?"üü¢ "+key+"<br>":"üî¥ "+key+"<br>";
  }
  document.getElementById("composition").innerHTML=html;
}

function detectPersonalData(password){
  let findings=[];
  if(/19\d{2}|20\d{2}/.test(password)) findings.push("Poss√≠vel ano detectado.");
  if(/1234|abcd|qwerty/i.test(password)) findings.push("Sequ√™ncia comum detectada.");
  if(/\d{4,}/.test(password)) findings.push("Sequ√™ncia num√©rica longa.");
  if(findings.length===0){
    document.getElementById("personalData").innerHTML=
      "<strong>Detector de Dados Pessoais:</strong><br>Nenhum padr√£o sens√≠vel identificado.";
  } else{
    document.getElementById("personalData").innerHTML=
      "<strong>Detector de Dados Pessoais:</strong><br>‚ö† "+findings.join("<br>‚ö† ");
  }
}

function checkPassword(){
  if(typeof zxcvbn!=="function") return;
  const password=document.getElementById("password").value;
  if(password.length===0) return;

  const result=zxcvbn(password);
  const entropy=calculateEntropy(password);

  document.getElementById("bar").style.width=(result.score+1)*20+"%";
  document.getElementById("bar").style.background="#06b6d4";

  document.getElementById("scoreInfo").innerText=
    "Score zxcvbn: "+result.score+" / 4";

  updateSOC(entropy);

  document.getElementById("attackSim").innerHTML=
    "<strong>Simula√ß√£o de Ataque:</strong><br>"+
    "Online limitado: "+translateTime(result.crack_times_display.online_throttling_100_per_hour)+"<br>"+
    "Offline (GPU): "+translateTime(result.crack_times_display.offline_fast_hashing_1e10_per_second);

  document.getElementById("vulnerabilities").innerHTML=
    "<strong>Vulnerabilidades:</strong><br>"+
    (result.feedback.warning || "Nenhuma vulnerabilidade cr√≠tica detectada.")+
    "<br>"+result.feedback.suggestions.join("<br>");

  analyzeComposition(password);
  detectPersonalData(password);
}

function generatePassword(){
  const chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";
  let p="";
  for(let i=0;i<16;i++){
    p+=chars.charAt(Math.floor(Math.random()*chars.length));
  }
  document.getElementById("password").value=p;
  checkPassword();
}

function generatePDF(){
  const { jsPDF } = window.jspdf;
  const doc=new jsPDF();
  doc.text("Relat√≥rio - Password Shield",20,20);
  doc.text(document.getElementById("socLabel").innerText,20,40);
  doc.save("Relatorio_Password_Shield.pdf");
}

</script>

</body>
</html>
